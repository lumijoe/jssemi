<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>jstest</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-light">
    <header style="background-color: antiquewhite">
      <ul>
        <li><a href="./jstest.html">TOP</a></li>
        <li><a href="./js01.html">js01</a></li>
        <li><a href="./js02.html">js02</a></li>
        <li><a href="./js03.html">js03„Å∏</a></li>
        <li><a href="./js04.html">Todo„É™„Çπ„Éà</a></li>
      </ul>
    </header>

    <!-- „É≠„Ç∞„Ç§„É≥ -->
    <!-- „Éú„Çø„É≥„Åß„É¢„Éº„ÉÄ„É´„ÇíÈñã„Åè -->
    <div class="container mt-5 text-center">
      <button
        type="button"
        class="btn btn-primary"
        data-bs-toggle="modal"
        data-bs-target="#loginModal"
      >
        „É≠„Ç∞„Ç§„É≥
      </button>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´Êú¨‰Ωì -->
    <div
      class="modal fade"
      id="loginModal"
      tabindex="-1"
      aria-labelledby="loginModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="loginModalLabel">„É≠„Ç∞„Ç§„É≥</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Èñâ„Åò„Çã"
            ></button>
          </div>
          <div class="modal-body">
            <form id="loginForm">
              <div class="mb-3">
                <label for="username" class="form-label">„É¶„Éº„Ç∂„ÉºÂêç</label>
                <input
                  type="text"
                  class="form-control"
                  id="username"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                <input
                  type="password"
                  class="form-control"
                  id="password"
                  required
                />
              </div>
              <div class="mb-3 form-check">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="rememberMe"
                />
                <label class="form-check-label" for="rememberMe"
                  >„É≠„Ç∞„Ç§„É≥ÊÉÖÂ†±„Çí‰øùÊåÅ„Åô„Çã</label
                >
              </div>
              <div class="d-grid mb-2">
                <button type="submit" class="btn btn-primary">„É≠„Ç∞„Ç§„É≥</button>
              </div>
              <div
                id="loginMessage"
                class="text-center text-danger small"
              ></div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <h1>JStest</h1>
    <button type="button"><a href="./js01.html">js01„Å∏</a></button>
    <button type="button"><a href="./js02.html">js02„Å∏</a></button>
    <button type="button"><a href="./js03.html">js03„Å∏</a></button>
    <h1>Todo„É™„Çπ„Éà</h1>
    <button type="button"><a href="./js04.html">Todo„É™„Çπ„Éà„Å∏</a></button>
    <!-- Bootstrap Bundle JS (PopperÂê´„ÇÄ) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    


      // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´‰øùÂ≠ò„Åï„Çå„Åü„É≠„Ç∞„Ç§„É≥ÊÉÖÂ†±„Åå„ÅÇ„Çå„Å∞Ë™≠„ÅøËæº„ÇÄ
      document.addEventListener("DOMContentLoaded", function () {
        const savedUsername = localStorage.getItem("username");
        const savedPassword = localStorage.getItem("password");
        const isRemembered = localStorage.getItem("rememberMe") === "true";

        if (savedUsername && savedPassword) {
          document.getElementById("username").value = savedUsername;
          document.getElementById("password").value = savedPassword;
          if (isRemembered) {
            document.getElementById("rememberMe").checked = true;
          }
          // „É≠„Ç∞„Ç§„É≥Áä∂ÊÖã„ÅÆ„Éú„Çø„É≥„Çπ„Çø„Ç§„É´„ÇíÈÅ©Áî®
          const loginButton = document.querySelector('[data-bs-target="#loginModal"]');
          loginButton.classList.remove("btn-primary");
          loginButton.classList.add("btn-warning");
          loginButton.textContent = "„É≠„Ç∞„Ç§„É≥‰∏≠";
        }
      });

      // „Éñ„É©„Ç¶„Ç∂„ÇíÈñâ„Åò„ÇãÊôÇ„ÅÆÂá¶ÁêÜ
      window.addEventListener("beforeunload", function () {
        const rememberMe = document.getElementById("rememberMe").checked;
        if (!rememberMe) {
          // „É≠„Ç∞„Ç§„É≥ÊÉÖÂ†±„Çí‰øùÊåÅ„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„Åô„Åπ„Å¶„ÅÆÊÉÖÂ†±„ÇíÂâäÈô§
          localStorage.removeItem("username");
          localStorage.removeItem("password");
          localStorage.removeItem("rememberMe");
        }
      });

      document
        .getElementById("loginForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const username = document.getElementById("username").value;
          const password = document.getElementById("password").value;
          const rememberMe = document.getElementById("rememberMe").checked;
          const message = document.getElementById("loginMessage");

          if (username === "user" && password === "pass") {
            // „É≠„Ç∞„Ç§„É≥ÊÉÖÂ†±„Çí‰øùÂ≠ò„Åô„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ
            if (rememberMe) {
              localStorage.setItem("username", username);
              localStorage.setItem("password", password);
              localStorage.setItem("rememberMe", "true");
            } else {
              // „ÉÅ„Çß„ÉÉ„ÇØ„ÅåÂ§ñ„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØ‰øùÂ≠ò„Åï„Çå„ÅüÊÉÖÂ†±„ÇíÂâäÈô§
              localStorage.removeItem("username");
              localStorage.removeItem("password");
              localStorage.removeItem("rememberMe");
            }

            message.classList.remove("text-danger");
            message.classList.add("text-success");
            message.textContent = "„É≠„Ç∞„Ç§„É≥ÊàêÂäü„Åó„Åæ„Åó„ÅüÔºÅüéâ";

            // „É≠„Ç∞„Ç§„É≥„Éú„Çø„É≥„ÅÆËâ≤„ÇíÈªÑËâ≤„Å´Â§âÊõ¥
            const loginButton = document.querySelector('[data-bs-target="#loginModal"]');
            loginButton.classList.remove("btn-primary");
            loginButton.classList.add("btn-warning");
            loginButton.textContent = "„É≠„Ç∞„Ç§„É≥‰∏≠";

            // 2ÁßíÂæå„Å´„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
            setTimeout(() => {
              const modal = bootstrap.Modal.getInstance(
                document.getElementById("loginModal")
              );
              modal.hide();
            }, 1500);
          } else {
            message.classList.remove("text-success");
            message.classList.add("text-danger");
            message.textContent =
              "„É¶„Éº„Ç∂„ÉºÂêç„Åæ„Åü„ÅØ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ";
          }
        });

      // if (document.getElementById("rememberMe").checked) {
      //   localStorage.setItem("username", username);
      // }

    
    </script>
    <script>
         window.addEventListener("click", function (e) {
    const isLoggedIn =
      localStorage.getItem("username") === "user" &&
      localStorage.getItem("password") === "pass";

    if (!isLoggedIn) {
      // Bootstrap„ÅÆ„É¢„Éº„ÉÄ„É´„ÇíÈñã„Åè
      const loginModal = new bootstrap.Modal(document.getElementById("loginModal"));
      loginModal.show();
    }
  });
      </script>
      
  </body>
</html>